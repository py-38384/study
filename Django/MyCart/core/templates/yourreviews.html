{% extends 'base.html' %}
{% load static %}
{% block content %}
<h3 class="header">Your reviews</h3>
<div class="row px-5">
<div class="col-md-6 review-div">
    
    {% for review_obj in review_arr %}
      <h5 class="mb-4 review_header">Your review for "{{review_obj.product_name}}"</h5>
      {% for review in review_obj.list %}
      <div class="media mb-4 review_div_{{review.id}}">
        <a href="">
        <img
          {% if review.user.display_picture %}
          src="/{{review.user.display_picture}}/"
          {% else %}
          src="{% static 'img/review_default_user_dp.png' %}/"
          {% endif %}
          alt="Image"
          class="img-fluid mr-3 mt-1"
          style="width: 45px"
        />
        </a>
        <div class="media-body">
          <h6>
            <a href="">{{review.user.name}}</a><small> - <i class="review_time">{{review.timesince}}</i></small>
          </h6>
          <div class="text-primary mb-2">
            {% if review.review_star == 5 %}
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            {% elif review.review_star == 4 %}
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="far fa-star"></i>
            {% elif review.review_star == 3 %}
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="far fa-star"></i>
            <i class="far fa-star"></i>
            {% elif review.review_star == 2 %}
            <i class="fas fa-star"></i>
            <i class="fas fa-star"></i>
            <i class="far fa-star"></i>
            <i class="far fa-star"></i>
            <i class="far fa-star"></i>
            {% elif review.review_star == 1 %}
            <i class="fas fa-star"></i>
            <i class="far fa-star"></i>
            <i class="far fa-star"></i>
            <i class="far fa-star"></i>
            <i class="far fa-star"></i>
            {% endif %}
          </div>
          <p>
            {{review.comment}}
          </p>
          <div class="review-action-button-div">
            {% if request.user == review.user %}
            <span class="review-action-button-edit review-action-button" onclick="edit_review(this,event,{{review.id}})">Edit</span><span class="review-action-button-delete review-action-button" onclick="delete_review(this,event,{{review.id}})">Delete</span>
            {% endif %}
          </div>
        </div>
      </div>
      {% endfor %}
    {% endfor %}
</div>
<div class="col-md-6 review-div">
    <h4 class="mb-4 review-header">Leave a review</h4>
    <div class="d-flex my-3">
      <p class="mb-0 mr-2">Your Rating :</p>
      <div class="text-primary review_star_div" style="cursor:pointer;">
        <i onclick="set_review_star(1)" class="far fa-star"></i>
        <i onclick="set_review_star(2)" class="far fa-star"></i>
        <i onclick="set_review_star(3)" class="far fa-star"></i>
        <i onclick="set_review_star(4)" class="far fa-star"></i>
        <i onclick="set_review_star(5)" class="far fa-star"></i>
      </div>
    </div>
    <form action="" class="review-form" method="post">
      {% csrf_token %}
      <input type="hidden" id="review-star-value" name="review_star_value" value="0">
      <div class="form-group">
        <label for="message">Your Review :</label>
        <textarea
          id="message"
          name="comment"
          cols="30"
          rows="5"
          class="form-control comment-box"
        ></textarea>
      </div>
      <div class="form-group mb-0">
        <input
          type="submit"
          id="submit_comment"
          onclick="post_review(event)"
          value="Leave Your Review"
          class="btn btn-primary px-3"
        />
      </div>
    </form>
  </div>
</div>
</div>
{% endblock %}